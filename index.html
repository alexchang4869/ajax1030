<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX POST</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.min.js"
      integrity="sha512-0qU9M9jfqPw6FKkPafM3gy2CBAvUWnYVOfNPDYKVuRTel1PrciTj+a9P3loJB+j0QmN2Y0JYQmkBBS8W+mbezg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    新增標題：<input type="text" id="articleTitle" /><br />
    新增標籤：<input type="text" id="articleTag" /><br />
    <input type="button" value="送出" id="articleSend" />

    <script>
      let articleTitle = document.querySelector("#articleTitle");
      let articleTag = document.querySelector("#articleTag");
      let articleSend = document.querySelector("#articleSend");
      let articleUrl = "http://localhost:3000/articles";
      let dataStore = [];

      axios
        .get(articleUrl)
        .then((res) => {
          console.log(res.data);
          dataStore = res.data;
        })
        .catch((err) => {
          console.log(err.response);
        });

      articleSend.addEventListener("click", function (e) {
        let createTitle = articleTitle.value;
        let createTag = articleTag.value;
        let createObj = {};
        createObj.title = createTitle;
        createObj.tag = createTag;
        console.log(createObj);

        axios
          .post(articleUrl, createObj)
          .then((res) => {
            console.log(res.data);
          })
          .catch((err) => {
            console.log(err.response);
          });
      });
    </script>
  </body>
</html>
